/* Copyright (c) 2020 Synology Inc. All rights reserved. */

(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(E,C){if(this===null){throw new TypeError()}var F=Object(this),D=F.length>>>0;if(D===0){return -1}C=Number(C);if(isNaN(C)){C=0}else{if(C!==0&&isFinite(C)){C=(C>0?1:-1)*Math.floor(Math.abs(C))}}if(C>D){return -1}var B=C>=0?C:Math.max(D-Math.abs(C),0);for(;B<D;B++){if(B in F&&F[B]===E){return B}}return -1}}function v(){var C={},F=location.search.substr(1),B=F.split("&"),D,E;for(D=0;D<B.length;++D){E=B[D].split("=");C[E[0]]=decodeURIComponent(E[1])}return C}function z(){if(document.querySelector){if(document.querySelector('script[src*="sdsdbg.js?skip_prototype_js=yes"]')){return true}}return false}var k={Prototype:"scripts/prototype-1.7.3/DebugJSFileList.js",EXT:"scripts/ext-3/DebugJSFileList.js",Vue:"scripts/vue/DebugJSFileList.js",SDS:"synoSDSjslib/js/JSFileList.js",Desktop:"webman/sds/JSFileList.js",Login:"webman/login/js/JSFileList.js",SDSCommon:"webman/sds/Common/JSFileList.js"},l=[k.Prototype,k.EXT,k.Vue,k.SDS,k.Desktop,k.SDSCommon,k.Login],p=v(),c=p.skip_jsfilelist!==undefined,e=z(),f=false,h=[],m,y;m={Prototype:["scripts/prototype-1.7.2/prototype.js"],EXT:["scripts/ext-3/adapter/ext/ext-base.js","scripts/ext-3/ext-all.js","scripts/ext-3/ux/ux-all.js","scripts/scrollbar/flexcroll.js"],SDS:["synoSDSjslib/sds.js"],Desktop:["webman/desktop.js"]};y={Prototype:["scripts/ext-3/ux/ux-syno-polyfill.js","scripts/prototype-1.7.3/prototype.js"],EXT:["scripts/ext-3.4-compatible-6.x/adapter/ext/ext-base.js","scripts/ext-3.4-compatible-6.x/ext-all.js","scripts/ext-3.4-compatible-6.x/ux/ux-all.js","scripts/scrollbar/flexcroll.js"],Vue:["scripts/vue/vue.js","scripts/vuex/vuex.js","scripts/vue-router/vue-router.js"],SDS:["synoSDSjslib-compatible-6.x/sds.js"],SDSCommon:["webman/sds-common.js"],Login:["webman/login-vue.js","webman/login-init.js"],Desktop:["webman/desktop-compatible-6.x.js"]};function A(F,D){var E=D.split("."),B,C;for(C=0;C<E.length;++C){B=E[C];if(F[B]===undefined){F[B]={}}F=F[B]}}function x(F,I,D){var E=document.getElementsByTagName("head")[0];var C=document.createElement("script");var B=false;function G(){if(!B&&(!C.readyState||C.readyState==="loaded"||C.readyState==="complete")){B=true;var J=!C.readyState||C.readyState==="complete";if(typeof I==="function"){I.call(D||window,J,F)}C.onload=C.onreadystatechange=null}}function H(){if(typeof I==="function"){I.call(D||window,false,F)}}C.type="text/javascript";C.src=F;C.onload=C.onreadystatechange=G;C.onerror=H;E.appendChild(C)}function o(C,H,E){var D=C.concat(),F=[];function B(){x(D.shift(),G,this)}function G(I,J){if(!I){F.push(J)}if(D.length===0){if(typeof H==="function"){H.call(E||window,F.length===0,F)}return}B()}B()}function s(){if(document.querySelector){if(document.querySelector('script[src*="synoSDSjslib-compatible-6.x/sdsdbg.js"]')){return true}}return false}function u(B){return h.indexOf(B)!==-1}function i(D,G,E){var F=k[D],C=D+"FileList";var B=s();if(u(F)||B){if(B){SYNO.SDS.DebugInitiator[C]=y[D]}else{SYNO.SDS.DebugInitiator[C]=m[D]}}o(SYNO.SDS.DebugInitiator[C],function(){G.call(E||window)},this)}function t(B,C){if(!B){h=C.concat()}g()}function g(){var B=s();if(f){console.warn("ignored onInitStart");return}f=true;if(e||B){r()}else{w()}}function w(){i("Prototype",r,this)}function r(){if(s()){i("EXT",n,this)}else{i("EXT",q,this)}}function n(){i("Vue",q,this)}function q(){if(s()){i("SDS",b,this)}else{i("SDS",a,this)}}function b(){i("SDSCommon",a,this)}function a(){if(s()){i("Desktop",d,this)}else{i("Desktop",j,this)}}function d(){i("Login",j,this)}function j(){}A(window,"SYNO.SDS.DebugInitiator");if(c){console.log("skipLoadingJSFileList");t(false,l)}else{o(l,t,this)}})();